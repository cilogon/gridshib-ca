<html>
<head>
<!-- $Id$ -->
<title>GridShib CA: Portal Delegation</title>
<!-- global style sheet -->
<link rel="stylesheet" type="text/css" href="/styles/global.css" />

<!-- local style sheet -->
<link rel="stylesheet" type="text/css" href="/styles/local.css" />
</head>
@DOC_HEADER@

<center><h1>GridShib CA Portal Delegation</h1></center>

Since version 0.3.0 the GridShib-CA allows for the delegation of a
Grid credential based on Shibboleth authentication of the user to a
web portal that is not itself Shibboleth enabled. This web page
describes the process.
<p>
In addition to the user being authorized, the portal must also
<a href="install.html#authorizedPortals.conf">be authorized to receive
	credentials</a>
<p>
An example portal can be found
<a href="https://computer.ncsa.uiuc.edu/cgi-bin/gridshib-ca-demo-portal.cgi">here</a>
(and its source can be found
<a href="http://viewcvs.globus.org/viewcvs.cgi/gridshib/gridshib-ca/webdocs/gridshib-ca-demo-portal.cgi.in?view=markup">here</a>)
<p>
The portal must meet the following requirements:
<ol>
<li>It must be https protected.
<li>It must be able to generate a key pair and certificate request
<li>It must authenticate the user and save state from the generation
	of the certificate request to when the certificate is returned.
</ol>
<p>
<img src="portal-delegation.jpg" width=100%>
<ol>
<li>User visits application portal. Portal creates a key pair and
	certificate request for the user and presents a user with a form to
	submit the certificate request to the GridShib-CA.
<li>User submits form generated by application portal, submitting
	certificate request to the GridShib-CA. This will cause the user to
	undergo Shibboleth authentication if they have not already done
	so. The portalLogin.cgi script will present the user with a form
	indicating that they are about to delegation a Grid credential to
	the portal and ask them to confirm. The form presented to the user
	will have the certificate request and the Portal URL along with a
	Token generated by portalLogin.cgi to prevent a malicious portal
	from bypassing this confirmation.
<li>When the user submits the form from portalLogin.cgi, the
	certificate request will be submitted to generateCred.cgi.
<li>Assuming the user and portal
	are <a href="install.html#conf">authorized</a> a certificate will be 
	created.
<li>The certificate is presented back to the user to submit back to the portal.
<li>When the user submits the certificate back to the portal, the
	portal associates the certificate with the key pair it previously
	generated, creating a Grid credential to be used on behalf of the
	user.
</ol>


@DOC_FOOTER@
</html>
